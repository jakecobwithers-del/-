<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Flower Collective</title>
  <link 
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&display=swap" 
    rel="stylesheet"
  />
  <style>
    /* Reset & Base */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body {
      font-family: 'Inter', sans-serif;
      background: #fff0f5;
      color: #333;
      overflow-x: hidden;
    }
    a { text-decoration: none; color: inherit; }

    /* Navbar */
    #navbar {
      position: sticky; top: 0; z-index: 100;
      display: flex; align-items: center; justify-content: space-between;
      padding: 16px 32px;
      background: rgba(255,240,250,0.9);
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    #navbar .logo {
      display: flex; align-items: center;
    }
    #navbar .logo img {
      width: 40px; height: auto; margin-right: 12px;
    }
    #navbar .logo span {
      font-size: 1.5rem; font-weight: 700; color: #c83b7a;
    }
    #navbar .nav-links {
      display: flex; gap: 24px; font-weight: 500;
    }
    #navbar .nav-links a:hover {
      color: #a22e60; cursor: pointer;
    }

    /* Hero */
    #hero {
      position: relative;
      height: 80vh;
      background: #ffe4f0;
      overflow: hidden;
      display: flex; align-items: center; justify-content: center;
      text-align: center;
    }
    #hero .content {
      position: relative; z-index: 3;
      max-width: 700px;
      animation: fadeIn 1.5s ease-out;
    }
    #hero h1 {
      font-size: 3rem; margin-bottom: 16px;
      color: #c83b7a;
    }
    #hero p {
      font-size: 1.2rem; margin-bottom: 24px;
      color: #333;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* Petal Animations */
    .petal-container, #side-left, #side-right {
      position: absolute; top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none; overflow: hidden;
      z-index: 2;
    }
    #side-left, #side-right {
      position: fixed; top: 0;
      width: 60px; height: 100vh;
      display: none; z-index: 2;
    }
    #side-left { left: 0; }
    #side-right { right: 0; }

    .petal {
      position: absolute;
      width: 24px; height: 24px;
      background: url('pedals.png') no-repeat center/cover;
      opacity: 0.9;
      animation:
        fall var(--fall-dur) linear infinite,
        sway var(--sway-dur) ease-in-out infinite;
      /* durations set in JS */
    }
    @keyframes fall {
      to { transform: translateY(120vh); }
    }
    @keyframes sway {
      0%,100% { transform: translateX(0) rotate(0deg); }
      50%     { transform: translateX(20px) rotate(180deg); }
    }

    /* Shop Grid */
    #shop {
      padding: 60px 32px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px,1fr));
      gap: 32px;
      background: #fff;
    }
    .product {
      background: #ffe4f0; border-radius: 20px;
      padding: 24px; box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      display: flex; flex-direction: column;
      transition: transform 0.2s;
    }
    .product:hover { transform: translateY(-6px); }
    .product img {
      width: 100%; height: 180px; object-fit: cover;
      border-radius: 12px; margin-bottom: 16px;
    }
    .product h3 {
      margin: 0 0 8px; font-size: 1.2rem; color: #c83b7a;
    }
    .product p.desc {
      flex-grow: 1; margin-bottom: 12px; font-size: 0.95rem;
    }
    .product p.price {
      margin-bottom: 16px; font-weight: 700;
    }
    .product button {
      padding: 10px; background: #c83b7a; color: #fff;
      border: none; border-radius: 8px; font-weight: 700;
      cursor: pointer; transition: background 0.2s;
    }
    .product button:hover { background: #a22e60; }

    /* Cart Drawer */
    #cart-toggle {
      position: fixed; bottom: 20px; right: 20px;
      background: #c83b7a; color: #fff;
      padding: 14px 18px; border-radius: 50px;
      cursor: pointer; z-index: 100;
      box-shadow: 0 8px 24px rgba(0,0,0,0.3);
    }
    #cart-drawer {
      position: fixed; top: 0; right: -100%; width: 320px; height: 100%;
      background: #fff; box-shadow: -4px 0 16px rgba(0,0,0,0.1);
      padding: 24px; display: flex; flex-direction: column;
      transition: right 0.3s; z-index: 99;
    }
    #cart-drawer.open { right: 0; }
    #cart-drawer h2 {
      margin-bottom: 16px; color: #c83b7a;
    }
    #cart-items {
      flex-grow: 1; overflow-y: auto; margin-bottom: 16px;
    }
    .cart-item {
      display: flex; justify-content: space-between;
      margin-bottom: 12px;
    }
    .cart-item button {
      background: none; border: none;
      color: #c83b7a; font-size: 1rem; cursor: pointer;
    }
    #cart-total {
      font-weight: 700; margin-bottom: 24px;
    }
    #checkout-btn {
      padding: 12px; background: #c83b7a; color: #fff;
      border: none; border-radius: 8px; font-weight: 700;
      cursor: pointer;
    }

    /* Admin Panel */
    #admin-panel {
      position: fixed; bottom: 20px; left: 20px;
      background: #fff; padding: 24px; border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
      width: 280px; display: none; z-index: 100;
    }
    #admin-panel h3 {
      margin-bottom: 12px; color: #c83b7a;
    }
    #admin-panel input {
      display: block; width: 100%; margin-bottom: 10px;
      padding: 8px; border-radius: 6px; border: 1px solid #ccc;
    }
    #admin-panel button {
      padding: 10px; width: 100%;
      background: #c83b7a; color: #fff;
      border: none; border-radius: 6px; font-weight: 700;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <header id="navbar">
    <div class="logo">
      <img src="Flower.PNG" alt="Flower Collective Logo" />
      <span>Flower Collective</span>
    </div>
    <nav class="nav-links">
      <a onclick="scrollToHero()">Home</a>
      <a onclick="scrollToShop()">Shop</a>
      <a id="admin-login-link">Admin</a>
    </nav>
  </header>

  <!-- Hero -->
  <section id="hero">
    <div class="petal-container"></div>
    <div class="content">
      <h1>Welcome to the Flower Collective</h1>
      <p>Handcrafted floral art, jewelry, and home scentsâ€”curated with passion.</p>
      <button onclick="scrollToShop()">Shop Now</button>
    </div>
  </section>

  <!-- Side Petal Zones -->
  <div id="side-left"></div>
  <div id="side-right"></div>

  <!-- Shop Grid -->
  <section id="shop"></section>

  <!-- Cart Toggle & Drawer -->
  <div id="cart-toggle">Cart (<span id="cart-count">0</span>)</div>
  <aside id="cart-drawer">
    <h2>Your Cart</h2>
    <div id="cart-items"></div>
    <div id="cart-total">Total: $0.00</div>
    <button id="checkout-btn">Checkout</button>
  </aside>

  <!-- Admin Panel -->
  <aside id="admin-panel">
    <h3>Admin: Add New Product</h3>
    <input type="text" id="prod-title" placeholder="Title" />
    <input type="number" id="prod-price" placeholder="Price (AUD)" min="0" step="0.01" />
    <input type="text" id="prod-desc" placeholder="Description" />
    <input type="file" id="prod-img-file" accept="image/*" />
    <button onclick="addProduct()">Add Product</button>
  </aside>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // State
      let products = JSON.parse(localStorage.getItem('fc_products')) || [
        { title:"Petal Necklace", price:59, desc:"Hand-finished brass chain with dried petal bezel.", img:"Flower.PNG" },
        { title:"Pressed Flower Pin", price:25, desc:"Epoxy-encased vintage petals.", img:"Flower.PNG" },
        { title:"Bloom Candle", price:32, desc:"Small-batch soy wax with floral notes.", img:"Flower.PNG" }
      ];
      let cart = JSON.parse(localStorage.getItem('fc_cart')) || [];

      // Elements
      const hero            = document.getElementById('hero');
      const heroHeight      = hero.offsetHeight;
      const petalContainer  = hero.querySelector('.petal-container');
      const sideLeft        = document.getElementById('side-left');
      const sideRight       = document.getElementById('side-right');
      const shopEl          = document.getElementById('shop');
      const cartToggle      = document.getElementById('cart-toggle');
      const cartDrawer      = document.getElementById('cart-drawer');
      const cartCountEl     = document.getElementById('cart-count');
      const cartItemsEl     = document.getElementById('cart-items');
      const cartTotalEl     = document.getElementById('cart-total');
      const adminPanel      = document.getElementById('admin-panel');
      const adminLink       = document.getElementById('admin-login-link');

      // Petal Factory
      function createPetals(container, count){
        for(let i=0; i<count; i++){
          const p = document.createElement('div');
          p.className = 'petal';
          p.style.left = `${Math.random()*100}vw`;
          p.style.setProperty('--fall-dur', `${5 + Math.random()*5}s`);
          p.style.setProperty('--sway-dur', `${3 + Math.random()*3}s`);
          const delay = Math.random()*-10;
          p.style.animationDelay = `${delay}s, ${delay}s`;
          container.appendChild(p);
        }
      }
      createPetals(petalContainer, 60);
      createPetals(sideLeft, 20);
      createPetals(sideRight, 20);

      // Show/hide side vs hero petals on scroll
      window.addEventListener('scroll', () => {
        const scrolled = window.scrollY > heroHeight;
        petalContainer.style.display = scrolled ? 'none' : 'block';
        sideLeft.style.display        = scrolled ? 'block' : 'none';
        sideRight.style.display       = scrolled ? 'block' : 'none';
      });

      // Render Shop
      function renderShop(){
        shopEl.innerHTML = '';
        products.forEach((p,i) => {
          const card = document.createElement('div');
          card.className = 'product';
          card.innerHTML = `
            <img src="${p.img}" alt="${p.title}" />
            <h3>${p.title}</h3>
            <p class="desc">${p.desc}</p>
            <p class="price">$${p.price.toFixed(2)} AUD</p>
            <button onclick="addToCart(${i})">Add to Cart</button>
          `;
          shopEl.appendChild(card);
        });
        localStorage.setItem('fc_products', JSON.stringify(products));
      }

      // Cart Logic
      window.addToCart = function(idx){
        cart.push(products[idx]);
        updateCart();
      };
      window.removeFromCart = function(i){
        cart.splice(i,1);
        updateCart();
      };
      function updateCart(){
        cartCountEl.textContent = cart.length;
        cartItemsEl.innerHTML = '';
        let total = 0;
        cart.forEach((item,i) => {
          total += item.price;
          const row = document.createElement('div');
          row.className = 'cart-item';
          row.innerHTML = `
            <span>${item.title} - $${item.price.toFixed(2)}</span>
            <button onclick="removeFromCart(${i})">&times;</button>
          `;
          cartItemsEl.appendChild(row);
        });
        cartTotalEl.textContent = `Total: $${total.toFixed(2)}`;
        localStorage.setItem('fc_cart', JSON.stringify(cart));
      }
      cartToggle.onclick = () => cartDrawer.classList.toggle('open');

      // Admin Login & Add Product
      adminLink.onclick = () => {
        const user = prompt('Username:');
        const pass = prompt('Password:');
        if(user==='lux' && pass==='lux'){
          adminPanel.style.display = 'block';
        } else {
          alert('Invalid credentials');
        }
      };
      window.addProduct = function(){
        const title = document.getElementById('prod-title').value.trim();
        const price = parseFloat(document.getElementById('prod-price').value);
        const desc  = document.getElementById('prod-desc').value.trim();
        const file  = document.getElementById('prod-img-file').files[0];
        if(!title || isNaN(price)){
          return alert('Title and valid price are required');
        }
        const finalize = imgSrc => {
          products.push({ title, price, desc, img: imgSrc });
          renderShop();
          ['prod-title','prod-price','prod-desc','prod-img-file'].forEach(id => {
            document.getElementById(id).value = '';
          });
          alert('Product added!');
        };
        if(file){
          const reader = new FileReader();
          reader.onload = () => finalize(reader.result);
          reader.readAsDataURL(file);
        } else {
          finalize('Flower.PNG');
        }
      };

      // Smooth scroll helpers
      window.scrollToShop = () => {
        document.getElementById('shop').scrollIntoView({ behavior:'smooth' });
      };
      window.scrollToHero = () => {
        document.getElementById('hero').scrollIntoView({ behavior:'smooth' });
      };

      // Initialize
      renderShop();
      updateCart();
    });
  </script>
</body>
</html>
